<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Manage Employee</title>
</head>

<body>
    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
        integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- Our Custom CSS -->
    <link rel="stylesheet" href="http://localhost:3420/settings/style2">
    <link rel="stylesheet" href="http://localhost:3420/employee/css">


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>


    <!-- Font Awesome JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">




    <div id="Index" id="navba">
        <navbar-component></navbar-component>
        <div id="navbar-top">
            <navbar-top></navbar-top>
            <img src="../images/loading" id="Loading">
            <div id="content2">
                <div class="bord">
                    <div class="headin center">Manage Employees</div>
                    <div class="roww"></div>
                    <div style="text-align: right;">
                    <b style="display: inline-block;">Sort By : </b>
                    <div style="display: inline-block;">
                        <select @change="sort(sortfield)" class="form-control" v-model="sortfield">
                            <option v-for="i in sortarr">
                                {{i}}
                            </option>
                        </select>
                    </div></div><br>
                    <div class="empbox center" @click="edit(i.empid)" v-for="i in myArray">
                        <b>{{i.name}}</b><br>
                        <img v-bind:src="i.photo" height="80px" width="80px">
                        <table class="tabman">
                            <tr>
                                <td><b>Date of Joining : </b></td>
                                <td>{{i.doj}}</td>
                            </tr>
                            <tr>
                                <td><b>Department : </b></td>
                                <td>{{i.dep}}</td>
                            </tr>
                            <tr>
                                <td> <b>Designation : </b></td>
                                <td>{{i.des}}</td>
                            </tr>
                        </table>
                        <table class="tabman2">
                            <tr>
                                <td><b>Date of Joining </b></td>
                            </tr>
                            <tr>
                                <td>{{i.doj}}</td>
                            </tr>
                            <tr>
                                <td><b>Department: </b></td>
                            </tr>
                            <tr>
                                <td>{{i.dep}}</td>
                            </tr>
                            <tr>
                                <td><b>Designation: </b></td>
                            </tr>
                            <tr>
                                <td>{{i.des}}</td>
                            </tr>
                            
                        </table>


                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="https://unpkg.com/vue@2.6.11/dist/vue.js"></script>
    <script src="http://localhost:3420/navbar2"></script>

    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script>
        var log = new Vue({
            el: "#Index",
            data: {
                myArray: [{ name: 'Worker 1', empid:1,dep: 'Department1', des: 'Designation1', doj: '23-04-2020', photo: 'http://localhost:3420/images/emp_man' },
                { name: 'Worker 2', empid:1,dep: 'Department1', des: 'Designation1', doj: '23-04-2010', photo: 'http://localhost:3420/images/emp_man' },
                { name: 'Worker 3',empid:1, dep: 'Department1', des: 'Designation1', doj: '23-04-2020', photo: 'http://localhost:3420/images/emp_fem' },
                { name: 'Worker 4',empid:1, dep: 'Dep3', des: 'Des3', doj: '23-04-2010', photo: 'http://localhost:3420/images/emp_fem' },
                { name: 'Worker 8',empid:1, dep: 'Dep1', des: 'Des1', doj: '23-04-2010', photo: 'http://localhost:3420/images/emp_man' },
                { name: 'Worker 6',empid:1, dep: 'Dep1', des: 'Des1', doj: '23-04-2010', photo: 'http://localhost:3420/images/emp_man' },
                { name: 'Worker 7',empid:1, dep: 'Dep1', des: 'Des1', doj: '23-04-2010', photo: 'http://localhost:3420/images/emp_fem' },
                { name: 'Worker 9',empid:1, dep: 'Dep1', des: 'Des1', doj: '23-04-2020', photo: 'http://localhost:3420/images/emp_fem' }],
                sortfield: 'Name',
                sortarr:['Name','Department','Designation','Date of Joining'],
                sortarr2:['name','des','dep','doj'],
            },
            created: function () {
                this.load();
            },
            methods: {
                load: function () {
                    this.sort(this.sortfield);
                }, sort(name, type) {
                    var i=0;
                    if(name=="Name"){
                        i=0
                    }else if(name=='Department'){
                        i=1
                    }else if(name=='Designation'){
                        i=2
                    }else if(name=="Date of Joining"){
                        i=3
                    }
                    this.sortfield=this.sortarr2[i];
                    console.log(this.sortfield)
                    if (this.sortfield == 'name' || this.sortfield == 'dep'|| this.sortfield == 'des' ) {
                        this.myArray.sort(this.compare)
                    } else if (this.sortfield == 'doj') {
                        this.myArray.sort(this.comparedate)
                        
                    }

                }, compare(a, b) {
                    var nameA = a[this.sortfield]
                    var nameB = b[this.sortfield]
                    if (nameA < nameB) { return -1; }
                    if (nameA > nameB) { return 1; }
                    return 0;
                },
                comparedate(a, b) {
                    var nameA = a[this.sortfield]
                    var nameB = b[this.sortfield]
                    nameA = nameA.slice(6, 10) + nameA.slice(3, 5) + nameA.slice(0, 2)
                    nameB = nameB.slice(6, 10) + nameB.slice(3, 5) + nameB.slice(0, 2)
                    if (nameA < nameB) {
                        return -1;
                    }
                    if (nameA > nameB) {
                        return 1;
                    }
                    return 0;
                },edit(idx){
                    window.location.href="http://localhost:3420/employee/edit_emp?empid="+idx
                }

            }
        })    
    </script>

    <script src="http://localhost:3420/navbar2/collapsing"></script>
</body>

</html>